<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
        <script>
            consomeAPI = () => {
                //recupera o valor do usuario
                let titulo = document.getElementById('titulo').value
                //faz a requisicao no servidor ombdapi.com
                let requisicao = new XMLHttpRequest()
                //cria a URL
                let url = `http://www.omdbapi.com/?t=${titulo}&apikey=eb22085d`
                // TRUE abre a conexao de forma assincrona - posso continuar o programa sem esperar uma resposta do servidor
                //metodo GET de busca
                requisicao.open('GET', url, true)
                requisicao.send()
                requisicao.onload = function () {
                    if ((requisicao.readyState == 4) && (requisicao.status >= 200) && (requisicao.status <= 400)){
                        let resposta = JSON.parse(requisicao.responseText)
                        document.getElementById(`Title`).innerHTML = resposta.Title
                        document.getElementById(`Year`).innerHTML = resposta.Year
                        document.getElementById(`Rated`).innerHTML = resposta.Rated
                        document.getElementById(`Released`).innerHTML = resposta.Released
                        document.getElementById(`Runtime`).innerHTML = resposta.Runtime
                        document.getElementById(`Genre`).innerHTML = resposta.Genre
                        document.getElementById(`Director`).innerHTML = resposta.Director
                        document.getElementById(`Writer`).innerHTML = resposta.Writer
                        document.getElementById(`Actors`).innerHTML = resposta.Actors
                        document.getElementById(`Plot`).innerHTML = resposta.Plot
                        document.getElementById(`Language`).innerHTML = resposta.Language
                        document.getElementById(`Country`).innerHTML = resposta.Country
                        document.getElementById(`Awards`).innerHTML = resposta.Awards
                        document.getElementById(`Poster`).src = resposta.Poster
                    }
                    else{
                        console.log(`Requisicao sem resposta`)
                    }
                }
            }
        </script>
    </head>
    <body>
        <div class="container">
            <form>
                <div class="form-group"> <!-- Form-group e do bootstrap (agrupa os dados)-->
                    <label> TÍTULO DO FILME </label>
                    <input class="form-control" type="text" id="titulo"> <!-- Form-control e do bootstrap (contem os dados)-->
                </div>
                <div class="form-group">
                    <button type="button" onClick="consomeAPI()" class="btn btn-primary"> Consome API </button>
                </div>
                <div class="form-group">
                    Título : <h2 id="Title"> </h2>
                    Ano : <h3 id="Year"> </h3>
                    Classificação : <h3 id="Rated"> </h3> 
                    Disponivel em : <h3 id="Released"> </h3> 
                    Duração : <h3 id="Runtime"> </h3> 
                    Genero : <h3 id="Genre"> </h3>
                    Diretor : <h3 id="Director"> </h3>
                    Escritor : <h3 id="Writer"> </h3>
                    Atores : <h3 id="Actors"> </h3>
                    Enredo : <h3 id="Plot"> </h3>
                    Linguagem : <h3 id="Language"> </h3>
                    País de origem : <h3 id="Country"> </h3>
                    Premios : <h3 id="Awards"> </h3>
                </div>
                <h3>
                    <img id = "Poster">
                </h3>
            </form>
        </div>
    </body>
</html>
